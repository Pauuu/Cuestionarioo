var formElement=null,respuestasText=[],respuestasSelect=[],respuestasMultiple1=[],respuestasMultiple2=[],respuestasCheckbox1=[],respuestasCheckbox2=[],respuestasRadio=[],nota=0,comprobado=!1;function gestionarJson(e){var t,n=JSON.parse(e),o=(Object.keys(n.question).length,document.getElementsByClassName("preg"));for(i=0;i<2;i++)t=n.question[i].title,mostrarText(i,t),respuestasText[i]=n.question[i].answer;var s=0;for(i=2;i<4;i++){var a=n.question[i].title,u=[];for(o=0;o<n.question[i].option.length;o++)u[o]=n.question[i].option[o];mostrarSelect(i,a,u,s),respuestasSelect[s]=n.question[i].answer,s++}for(i=4;i<6;i++){var c=n.question[i].title,l=[];for(o=0;o<n.question[i].option.length;o++)l[o]=n.question[i].option[o];if(mostrarMultiple(i,c,l,s),4==i){var p=n.question[i].answer.length;for(r=0;r<p;r++)respuestasMultiple1[r]=n.question[i].answer[r]}else if(5==i){p=n.question[i].answer.length;for(r=0;r<p;r++)respuestasMultiple2[r]=n.question[i].answer[r]}s++}var m=0;for(i=6;i<8;i++){var g=n.question[i].title,d=[];for(o=0;o<n.question[i].option.length;o++)d[o]=n.question[i].option[o];if(mostrarCheckbox(i,g,d,m),6==i){var f=n.question[i].answer.length;for(r=0;r<f;r++)respuestasCheckbox1[r]=n.question[i].answer[r]}else if(7==i){f=n.question[i].answer.length;for(r=0;r<f;r++)respuestasCheckbox2[r]=n.question[i].answer[r]}m++}var h=0;for(i=8;i<10;i++){var v=n.question[i].title,P=[];for(o=0;o<n.question[i].option.length;o++)P[o]=n.question[i].option[o];mostrarRadio(i,v,P,h),respuestasRadio[h]=n.question[i].answer,h++}}function mostrarCheckbox(e,r,t,n){document.getElementsByTagName("h3")[e].innerHTML=r;var o=document.getElementsByClassName("checkboxDiv")[n];for(nombreAsignado=6==e?"seis":"siete",j=0;j<t.length;j++){var i=document.createElement("input"),s=document.createElement("label");s.innerHTML=t[j],s.setAttribute("for",nombreAsignado+"_"+j),i.type="checkbox",i.name=nombreAsignado,i.id=nombreAsignado+"_"+j,o.appendChild(i),o.appendChild(s),o.appendChild(document.createElement("br"))}}function mostrarRadio(e,r,t,n){document.getElementsByTagName("h3")[e].innerHTML=r;var o=document.getElementsByClassName("radioDiv")[n];for(nombreAsignado=8==e?"ocho":"nueve",j=0;j<t.length;j++){var i=document.createElement("input"),s=document.createElement("label");s.innerHTML=t[j],s.setAttribute("for",nombreAsignado+"_"+j),i.type="radio",i.name=nombreAsignado,i.id=nombreAsignado+"_"+j,o.appendChild(i),o.appendChild(s),o.appendChild(document.createElement("br"))}}function mostrarMultiple(e,r,t,n){document.getElementsByTagName("h3")[e].innerHTML=r;var o=document.getElementsByTagName("select")[n];for(j=0;j<t.length;j++){var i=document.createElement("option");i.text=t[j],i.value=j+1,o.options.add(i)}}function mostrarSelect(e,r,t,n){document.getElementsByTagName("h3")[e].innerHTML=r;var o=document.getElementsByTagName("select")[n];for(j=0;j<t.length;j++){var i=document.createElement("option");i.text=t[j],i.value=j+1,o.options.add(i)}}function mostrarText(e,r){document.getElementsByTagName("h3")[e].innerHTML=r}function corregirText(){for(p=0;p<2;p++){var e=formElement.elements[p].value;e==respuestasText[p]?(darRespuesta("P"+(p+1)+": Exacto"),nota+=1):e!=respuestasText[p]&&darRespuesta("P"+(p+1)+": No es correcto")}}function corregirSelect(){var e=0;for(p=2;p<4;p++){formElement.elements[p].selectedIndex-1==respuestasSelect[e]?(nota+=1,darRespuesta("P"+(p+1)+": Correcto")):darRespuesta("P"+(p+1)+": Incorrecto"),e++}}function corregirMultiple(){for(p=4;p<6;p++){var e=[];4==p?e=respuestasMultiple1.slice():5==p&&(e=respuestasMultiple2.slice());var r=formElement.elements[p],t=[];for(i=1;i<r.length;i++){if(r.options[i].selected){for(t[i-1]=!1,j=0;j<e.length;j++)i-1==e[j]&&(t[i]=!0,nota+=1/e.length);1==t[i]?darRespuesta("P"+(p+1)+": Opción "+(i+1)+" Correcta"):darRespuesta("P"+(p+1)+": Opción "+(i+1)+" Incorrecta")}}}}function corregirCheckbox(){var e=formElement,r=[];for(p=6;p<8;p++){var t;for(6==p?(resCheck=respuestasCheckbox1.slice(),t=e.seis):7==p&&(resCheck=respuestasCheckbox2.slice(),t=e.siete),i=0;i<t.length;i++)if(t[i].checked){for(r[i]=!1,j=0;j<resCheck.length;j++)i==resCheck[j]&&(r[i]=!0);r[i]?(nota+=1/resCheck.length,darRespuesta("P "+(p+1)+": Opción "+(i+1)+" Correcta")):(nota-=1/resCheck.length,darRespuesta("P "+(p+1)+": Opción "+(i+1)+" Incorrecta"))}}}function corregirRadio(){var e=0;for(p=8;p<10;p++){var r,t=formElement;for(8==p?pregunta=t.ocho:9==p&&(pregunta=t.nueve),i=0;i<pregunta.length;i++)1==pregunta[i].checked&&(r=!1,i==respuestasRadio[e]&&(r=!0),1==r?(nota++,darRespuesta("P "+(p+1)+": Opción "+(i+1)+" Correcta")):darRespuesta("P "+(p+1)+": Opción "+(i+1)+" Incorrecta"));e++}}function darNota(){darRespuesta("NOTA: "+nota)}function darRespuesta(e){document.getElementById("resultadosDiv").style.display="block";var r=document.createElement("p"),t=document.createTextNode(e);r.appendChild(t),document.getElementById("resultadosDiv").appendChild(r)}function comprobar(){var e=formElement,r=!1;for(numPreg=0;numPreg<2;numPreg++)if(""==e.elements[numPreg].value)return e.elements[numPreg].focus(),alert("Por favor, selecciona una opcion en la pregunta "+(numPreg+1)),!1;for(numPreg=2;numPreg<4;numPreg++)if(0==e.elements[numPreg].selectedIndex)return e.elements[numPreg].focus(),alert("Por favor, selecciona una opcion en la pregunta "+(numPreg+1)),!1;for(numPreg=4;numPreg<6;numPreg++){var t=!1;for(i=1;i<e.elements[numPreg].length;i++){e.elements[numPreg].options[i].selected&&(t=!0)}if(!t)return e.elements[numPreg].focus(),alert("Por favor, selecciona al menos una opcion en la pregunta "+(numPreg+1)),!1}for(numPreg=6;numPreg<8;numPreg++){var n;r=!1;for(n=6==numPreg?e.seis:e.siete,i=0;i<n.length;i++)n[i].checked&&(r=!0);if(!r)return n[0].focus(),alert("Por favor, selecciona al menos una opcion en la pregunta "+(numPreg+1)),!1;for(numPreg=8;numPreg<10;numPreg++){var o;if(""==(o=8==numPreg?e.ocho:e.nueve).value)return o[0].focus(),alert("Por favor, responde la pregunta "+(numPreg+1)),!1}return!0}}window.onload=function(){(formElement=this.document.getElementById("formulario")).onsubmit=function(){if(0==comprobado)return 1==comprobar()&&(corregirText(),corregirSelect(),corregirMultiple(),corregirCheckbox(),corregirRadio(),darNota(),comprobado=!0),!1};var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&gestionarJson(this.responseText)},e.open("GET","https://rawgit.com/Pauuu/Cuestionarioo/master/json/json.json",!0),e.send()};
